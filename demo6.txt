Modified the file from demo2 branch.